<p><link rel='stylesheet' href='../assets/css/main.css'/></p>
<p><a href="../README.html">&lt;&lt; back to main index</a></p>
<h1 id="lab-4.1-producer-benchmarking">Lab 4.1: Producer Benchmarking</h1>
<h3 id="overview">Overview</h3>
<p>Understand different send methods in producer</p>
<h3 id="depends-on">Depends On</h3>
<p>lab 3</p>
<h3 id="run-time">Run time</h3>
<p>30 mins</p>
<h2 id="step-1-create-a-benchmark-topic">Step 1 : Create a benchmark topic</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1">  $  <span class="ex">~/apps/kafka/bin/kafka-topics.sh</span>  --bootstrap-server localhost:9092  \</a>
<a class="sourceLine" id="cb1-2" title="2">     --create --topic benchmark --replication-factor 1  --partitions 2</a></code></pre></div>
<h2 id="step-2-producer">Step 2 : Producer</h2>
<ul>
<li>Inspect file : <code>src/main/java/x/lab_04/BenchmarkProducer.java</code><br />
</li>
<li>Fix all TODO items, using Eclipse (or any other editor).</li>
</ul>
<h2 id="step-3-run-the-producer">Step 3 : Run the producer</h2>
<p>In Eclipse, * Right click on ‘src/main/java/x/lab04_benchmark/BenchmarkProducer.java’ * Run as ‘Java Application’</p>
<p>In Eclipse console, you should see output as follows:</p>
<pre class="console"><code>== ClickstreamProducer (topic=clickstream, maxMessages=100, sendMode=SYNC) done.  100 messages sent in 23.0206651 milli secs.  Throughput : 4343.923147554933 msgs / sec

== ClickstreamProducer (topic=clickstream, maxMessages=100, sendMode=ASYNC) done.  100 messages sent in 20.3356646 milli secs.  Throughput : 4917.468986973752 msgs / sec

== ClickstreamProducer (topic=clickstream, maxMessages=100, sendMode=FIRE_AND_FORGET) done.  100 messages sent in 20.8203518 milli secs.  Throughput : 4802.992810140701 msgs / sec
</code></pre>
<h2 id="step-4-send-events-to-another-machine">Step 4 : Send events to Another Machine</h2>
<ul>
<li>Pair up with a buddy in the class</li>
<li>Use their machine’s IP address as your Kafka broker</li>
<li>send events to their machine</li>
<li>measure the send rate</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb3-1" title="1">props.<span class="fu">put</span>(<span class="st">&quot;bootstrap.servers&quot;</span>, <span class="st">&quot;HOSTNAME_OR_IP:9092&quot;</span>);</a></code></pre></div>
<h2 id="step-5-class-discussion">Step 5 : Class Discussion</h2>
<p>Discuss your findings.</p>
<h2 id="bonus-lab-try-different-parameters">Bonus Lab: Try different parameters</h2>
